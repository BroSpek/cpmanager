(()=>{var e,t,n,o,a,i={136:()=>{window.CPManager=window.CPManager||{},CPManager.config={baseUrl:null,placeholderValue:"â€”",inMemoryCacheTTLMinutes:1,itemsPerPage:6,predefinedColors:["bg-pink-500","bg-purple-500","bg-indigo-500","bg-teal-500","bg-lime-500","bg-amber-500","bg-orange-500","bg-cyan-500","bg-red-600","bg-green-600","bg-blue-600","bg-yellow-600"],authViaMapping:{"---ip---":"IP","---mac---":"MAC","Local Database":"Local DB",Voucher:"Voucher","":"Anon"},voucherStateMapping:{unused:"Unused",valid:"Active",expired:"Expired"},zoneFieldMappings:{enabled:"Enabled",zoneid:"Zone ID",interfaces:"Interfaces",disableRules:"Disable Auto Rules",authservers:"Auth Servers",alwaysSendAccountingReqs:"RADIUS Accounting",authEnforceGroup:"Enforce Group",idletimeout:"Idle Timeout",hardtimeout:"Hard Timeout",concurrentlogins:"Concurrent Logins",certificate:"SSL Certificate",servername:"HTTPS Server Name",allowedAddresses:"Allowed IPs",allowedMACAddresses:"Allowed MACs",extendedPreAuthData:"Extended Pre-Auth Data",template:"Login Page Template",description:"Description",uuid:"UUID"},localStorageKeys:{theme:"theme",activeTab:"activeHelpdeskTab",apiKey:"opnsenseApiKey",apiSecret:"opnsenseApiSecret",apiBaseUrl:"opnsenseApiBaseUrl",sessionZoneFilter:"sessionZoneFilter",selectedVoucherProvider:"selectedVoucherProvider",voucherGroupFilterPrefix:"voucherGroupFilter_",signInNotificationsEnabled:"signInNotificationsEnabled"}},CPManager.state={currentApiKey:"",currentApiSecret:"",confirmCallback:null,zoneColors:{},authViaColors:{},zoneColorIndex:0,authViaColorIndex:Math.floor(CPManager.config.predefinedColors.length/2),sessions:{all:[],lastFetched:0,managerDetails:null,currentPage:1},vouchers:{current:[],lastGenerated:[],cachedProviders:[],lastFetchedProviders:0,cachedGroups:{},cachedGroupsTimestamps:{},cachedData:{},currentPage:1},zones:{allConfigured:[],lastFetched:0,originalFullDataForEdit:null,customTemplates:[],customTemplatesLastFetched:0,currentPage:1},dashboard:{chartInstance:null,originalUploadBytes:0,originalDownloadBytes:0,originalTotalBytes:0,apiDataCache:{sessions:null,sessionsLastFetched:0,voucherStats:null,voucherStatsLastFetched:0}},notifications:{previousSessionIds:new Set,isFirstPoll:!0,sessionPollIntervalId:null,POLLING_INTERVAL:3e4,POLLING_INTERVAL_HIDDEN_TAB:3e5,consecutivePollErrors:0,MAX_POLL_ERRORS_BEFORE_DISABLE:5}}},1408:(e,t,n)=>{"use strict";var o,a=n(7107),i=n(6188);n(136),n(1549),n(6232),n(8212),(o=CPManager).tabs={loaded:{dashboard:!1,sessions:!1,vouchers:!1,info:!1},setActiveTab:async function(e,t=!1){if(o.elements.mainTabs&&o.elements.tabPanes[e]){if(o.elements.mainTabs.querySelectorAll(".tab-btn").forEach((t=>{t.dataset.tab===e?(t.classList.add("active","text-primary","border-primary"),t.classList.remove("border-transparent","text-muted-foreground","hover:text-foreground","hover:border-muted"),t.setAttribute("aria-selected","true")):(t.classList.remove("active","text-primary","border-primary"),t.classList.add("border-transparent","text-muted-foreground","hover:text-foreground","hover:border-muted"),t.setAttribute("aria-selected","false"))})),Object.keys(o.elements.tabPanes).forEach((t=>{o.elements.tabPanes[t]&&(t===e?(o.elements.tabPanes[t].classList.remove("hidden"),o.elements.tabPanes[t].classList.add("active"),o.elements.tabPanes[t].removeAttribute("hidden")):(o.elements.tabPanes[t].classList.add("hidden"),o.elements.tabPanes[t].classList.remove("active"),o.elements.tabPanes[t].setAttribute("hidden","")))})),!o.tabs.loaded[e])switch(e){case"dashboard":await n.e(844).then(n.t.bind(n,1844,23)),o.dashboard.initializeDashboardEventListeners(),o.tabs.loaded[e]=!0;break;case"sessions":await n.e(159).then(n.t.bind(n,3159,23)),o.sessions.initializeSessionEventListeners(),o.tabs.loaded[e]=!0;break;case"vouchers":await n.e(469).then(n.t.bind(n,7469,23)),o.vouchers.initializeVoucherEventListeners(),o.tabs.loaded[e]=!0;break;case"info":await n.e(415).then(n.t.bind(n,3415,23)),o.zones.initializeZoneEventListeners(),o.tabs.loaded[e]=!0}switch(e){case"dashboard":await o.dashboard.loadDashboardData(t);break;case"sessions":await o.sessions.loadSessions(t);break;case"vouchers":await o.vouchers.loadVoucherProviders(t);break;case"info":await o.zones.loadZoneInfo(t);break;default:console.warn(`No specific load function for tab: ${e}`)}a.tT.watch();try{localStorage.setItem(o.config.localStorageKeys.activeTab,e)}catch(e){console.warn("Could not save active tab to localStorage:",e.message)}}else console.error(`Tab or tab pane not found for ID: ${e}`)},initializeTabs:function(){o.elements.mainTabs?o.elements.mainTabs.addEventListener("click",(e=>{const t=e.target.closest(".tab-btn");t&&t.dataset.tab&&(e.preventDefault(),o.tabs.setActiveTab(t.dataset.tab,!1))})):console.error("Main tabs container (mainTabs) not found.")}},n(4528),a.Yv.add(i.imB,i.oMq,i.PJS,i.XRN,i.z1G,i.Jt$,i.Wzs,i.XkK,i.BF2,i.iN5,i.z$e,i.zpE,i.iW_,i.s0Q,i.xiI,i.gdJ,i.Fny,i.qIE,i.yLE,i.$T_,i.CN3,i.aN6,i.OQW,i.Uj9,i.BeE,i.MT7),function(e){e.app={},e.app.applyTheme=function(t){let n=t;"system"===t&&(n=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),"dark"===n?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),e.elements.themeToggleBtn&&(e.elements.themeToggleBtn.innerHTML="light"===t?'<i class="fas fa-sun"></i>':"dark"===t?'<i class="fas fa-moon"></i>':'<i class="fas fa-mobile-alt"></i>',e.elements.themeToggleBtn.setAttribute("aria-label","light"===t?"Switch to Dark Mode":"dark"===t?"Switch to System Preference":"Switch to Light Mode"))},e.app.toggleTheme=async function(){const t=localStorage.getItem(e.config.localStorageKeys.theme)||"system";let n;n="light"===t?"dark":"dark"===t?"system":"light",localStorage.setItem(e.config.localStorageKeys.theme,n),e.app.applyTheme(n),e.dashboard&&"function"==typeof e.dashboard.handleThemeChange&&(console.log("Theme setting changed by toggle, triggering dashboard theme handler."),await e.dashboard.handleThemeChange())},e.app.loadTheme=function(){const t=localStorage.getItem(e.config.localStorageKeys.theme)||"system";e.app.applyTheme(t),"system"===t&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",(async()=>{"system"===localStorage.getItem(e.config.localStorageKeys.theme)&&(e.app.applyTheme("system"),e.dashboard&&"function"==typeof e.dashboard.handleThemeChange&&(console.log("System theme preference changed, triggering dashboard theme handler."),await e.dashboard.handleThemeChange()))}))},e.app.setCredentialEntryUIMode=function(t){const n=document.querySelector("nav"),o=e.elements.mainTabs?.closest(".mb-4.border-b"),a=document.getElementById("tabContent"),i=document.querySelector("footer"),s=e.elements.configInputSection,r=document.getElementById("main-content-scroll-area"),l=[n,o,a,i];t?(l.forEach((e=>e?.classList.add("hidden"))),s?.classList.remove("hidden"),r&&r.classList.add("flex","flex-col","items-center","justify-center","min-h-screen","p-4"),s&&(s.classList.add("max-w-lg","w-full","my-auto"),s.classList.remove("mb-4")),e.elements.saveApiCredsBtn&&(e.elements.saveApiCredsBtn.disabled=!1)):(l.forEach((e=>e?.classList.remove("hidden"))),s?.classList.add("hidden"),r&&r.classList.remove("flex","flex-col","items-center","justify-center","min-h-screen","p-4"),s&&(s.classList.remove("max-w-lg","w-full","my-auto"),s.classList.add("mb-4")),e.elements.saveApiCredsBtn&&(e.elements.saveApiCredsBtn.disabled=!0))},e.app.loadAppConfiguration=async function(){try{const t=await fetch("./app-config.json");if(!t.ok)throw new Error(`Failed to load app-config.json: ${t.statusText}`);const n=await t.json();n.apiBaseUrl?e.config.baseUrl=n.apiBaseUrl:(console.warn("apiBaseUrl not found in app-config.json. Will rely on user input for API Base URL."),e.config.baseUrl=""),void 0!==n.inMemoryCacheTTLMinutes&&"number"==typeof n.inMemoryCacheTTLMinutes&&(e.config.inMemoryCacheTTLMinutes=n.inMemoryCacheTTLMinutes),void 0!==n.itemsPerPage&&"number"==typeof n.itemsPerPage&&n.itemsPerPage>0&&(e.config.itemsPerPage=n.itemsPerPage),console.log("App config loaded. API Base URL:",e.config.baseUrl,"Cache TTL:",e.config.inMemoryCacheTTLMinutes,"Items/Page:",e.config.itemsPerPage)}catch(t){console.error("Error loading app configuration:",t),e.config.baseUrl="",e.elements.apiStatusFooterText&&(e.elements.apiStatusFooterText.textContent="App Config Load Failed!",e.elements.apiStatusFooterText.className="font-semibold text-red-500 dark:text-red-400"),e.ui.showToast(`Warning: App configuration file failed to load. Error: ${t.message}`,"warning",1e4)}},e.app.registerServiceWorker=function(){if("serviceWorker"in navigator){let e;navigator.serviceWorker.register("./sw.js").then((e=>console.log("Service worker registered:",e.scope))).catch((e=>console.error("Service worker registration failed:",e))),navigator.serviceWorker.addEventListener("controllerchange",(()=>{e||(window.location.reload(),e=!0)}))}},e.app.loadApiCredentials=function(){e.state.currentApiKey=localStorage.getItem(e.config.localStorageKeys.apiKey)||"",e.state.currentApiSecret=localStorage.getItem(e.config.localStorageKeys.apiSecret)||"",e.config.baseUrl=localStorage.getItem(e.config.localStorageKeys.apiBaseUrl)||e.config.baseUrl||"",e.elements.configApiKeyInput&&(e.elements.configApiKeyInput.value=e.state.currentApiKey),e.elements.configApiSecretInput&&(e.elements.configApiSecretInput.value=e.state.currentApiSecret),e.elements.configApiBaseUrlInput&&(e.elements.configApiBaseUrlInput.value=e.config.baseUrl)},e.app.saveApiCredentials=async function(){if(e.elements.configApiKeyInput&&e.elements.configApiSecretInput&&e.elements.configApiBaseUrlInput)if(e.state.currentApiKey=e.elements.configApiKeyInput.value.trim(),e.state.currentApiSecret=e.elements.configApiSecretInput.value.trim(),e.config.baseUrl=e.elements.configApiBaseUrlInput.value.trim(),e.config.baseUrl){try{new URL(e.config.baseUrl)}catch(t){return console.error("Invalid OPNsense API Base URL format:",t),void e.ui.showToast("Invalid OPNsense API Base URL format.","error")}if(e.state.currentApiKey&&e.state.currentApiSecret)try{localStorage.setItem(e.config.localStorageKeys.apiKey,e.state.currentApiKey),localStorage.setItem(e.config.localStorageKeys.apiSecret,e.state.currentApiSecret),localStorage.setItem(e.config.localStorageKeys.apiBaseUrl,e.config.baseUrl),e.ui.showToast("API credentials and Base URL saved.","success"),await e.app.initializeAppLogic();let t=localStorage.getItem(e.config.localStorageKeys.activeTab)||"dashboard";e.elements.tabPanes[t]||(t="dashboard"),console.log(`saveApiCredentials: Forcing refresh for tab: ${t}`),e.tabs.setActiveTab(t,!0)}catch(t){e.ui.showToast("Failed to save to local storage.","error"),console.error("Error saving to localStorage:",t)}else e.ui.showToast("API Key and Secret cannot be empty.","error")}else e.ui.showToast("OPNsense API Base URL cannot be empty.","error")},e.app.clearApiCredentials=function(){try{localStorage.removeItem(e.config.localStorageKeys.apiKey),localStorage.removeItem(e.config.localStorageKeys.apiSecret),localStorage.removeItem(e.config.localStorageKeys.apiBaseUrl)}catch(e){console.error("Error clearing localStorage:",e)}e.state.currentApiKey="",e.state.currentApiSecret="",e.config.baseUrl="",e.elements.configApiKeyInput&&(e.elements.configApiKeyInput.value=""),e.elements.configApiSecretInput&&(e.elements.configApiSecretInput.value=""),e.elements.configApiBaseUrlInput&&(e.elements.configApiBaseUrlInput.value=""),e.ui.showToast("API credentials cleared.","info"),e.app.setCredentialEntryUIMode(!0),document.querySelectorAll("button").forEach((t=>{t===e.elements.saveApiCredsBtn||t===e.elements.clearApiCredsBtn||t.id.startsWith("confirm-")||t.id.startsWith("cancel-")||t===e.elements.themeToggleBtn||(t.disabled=!0)})),document.querySelectorAll("input:not(#config-api-key):not(#config-api-secret):not(#config-api-base-url), select").forEach((e=>e.disabled=!0)),e.elements.mainTabs&&e.elements.mainTabs.querySelectorAll(".tab-btn").forEach((e=>e.classList.add("pointer-events-none"))),e.elements.apiStatusFooterText&&(e.elements.apiStatusFooterText.textContent="Credentials Cleared",e.elements.apiStatusFooterText.className="font-semibold text-yellow-500 dark:text-yellow-400"),e.elements.sessionCardContainer&&e.ui.clearContainer(e.elements.sessionCardContainer,"session-pagination"),e.elements.voucherCardContainer&&e.ui.clearContainer(e.elements.voucherCardContainer,"voucher-pagination"),e.elements.zoneListContainer&&e.ui.clearContainer(e.elements.zoneListContainer,"zone-pagination"),e.elements.dashboardStatsContainer&&e.ui.clearContainer(e.elements.dashboardStatsContainer),e.state.dashboard.chartInstance&&(e.state.dashboard.chartInstance.destroy(),e.state.dashboard.chartInstance=null),e.elements.donutTotalData&&(e.elements.donutTotalData.textContent=e.config.placeholderValue),e.state.sessions.all=[],e.state.sessions.currentPage=1,e.state.vouchers.cachedProviders=[],e.state.vouchers.cachedGroups={},e.state.vouchers.cachedData={},e.state.vouchers.currentPage=1,e.state.zones.allConfigured=[],e.state.zones.currentPage=1,e.state.dashboard.apiDataCache={sessions:null,voucherStats:null},e.dashboard.storeOriginalChartData(0,0,0)},e.app.checkApiStatusAndConfig=async function(){return e.config.baseUrl?e.state.currentApiKey&&e.state.currentApiSecret?(e.app.setCredentialEntryUIMode(!1),await e.api.checkConnection()?(e.elements.apiStatusFooterText&&(e.elements.apiStatusFooterText.textContent="Connected",e.elements.apiStatusFooterText.className="font-semibold text-green-600 dark:text-green-400"),!0):(e.elements.apiStatusFooterText&&(e.elements.apiStatusFooterText.textContent="Connection Failed",e.elements.apiStatusFooterText.className="font-semibold text-red-500 dark:text-red-400"),e.app.setCredentialEntryUIMode(!0),!1)):(e.elements.apiStatusFooterText&&(e.elements.apiStatusFooterText.textContent="Credentials Missing!",e.elements.apiStatusFooterText.className="font-semibold text-yellow-500 dark:text-yellow-400"),e.app.setCredentialEntryUIMode(!0),!1):(e.elements.apiStatusFooterText&&(e.elements.apiStatusFooterText.textContent="API Base URL Missing!",e.elements.apiStatusFooterText.className="font-semibold text-red-500 dark:text-red-400"),e.ui.showToast("OPNsense API Base URL is missing.","error",1e4),e.app.setCredentialEntryUIMode(!0),!1)},e.app.handleApplyCpConfiguration=async function(){if(!e.elements.applyCpConfigBtn)return;const t=e.elements.applyCpConfigBtn.innerHTML;e.elements.applyCpConfigBtn.disabled=!0,e.elements.applyCpConfigBtn.innerHTML='<i class="fas fa-spinner fa-spin mr-2"></i>Applying...',e.ui.showToast("Applying Captive Portal configuration changes...","info");try{const t=await e.api.callApi("/service/reconfigure","POST",{});if(t&&("ok"===t.status||t.message&&t.message.toLowerCase().includes("ok")))e.ui.showToast("Captive portal service reconfigured successfully.","success");else{const n=t?t.status||t.message||JSON.stringify(t):"Unknown response";e.ui.showToast(`Service reconfigure status: ${n}`,"warning"),console.warn("Service reconfigure did not return 'ok' status:",t)}}catch(t){console.error("Error during manual reconfigure call:",t),e.ui.showToast(`Error applying Captive Portal configuration: ${t.message}`,"error")}finally{e.elements.applyCpConfigBtn.disabled=!1,e.elements.applyCpConfigBtn.innerHTML=t}},e.app.initializeAllEventListeners=function(){if(!e||"object"!=typeof e.elements||null===e.elements)return void console.error("CPManager.elements not initialized. Cannot attach listeners.");e.elements.themeToggleBtn&&e.elements.themeToggleBtn.addEventListener("click",e.app.toggleTheme),e.elements.saveApiCredsBtn&&e.elements.saveApiCredsBtn.addEventListener("click",e.app.saveApiCredentials),e.elements.clearApiCredsBtn&&e.elements.clearApiCredsBtn.addEventListener("click",e.app.clearApiCredentials),e.elements.apiStatusFooter&&(e.elements.apiStatusFooter.addEventListener("click",(()=>{e.app.setCredentialEntryUIMode(!0)})),e.elements.apiStatusFooter.classList.add("cursor-pointer","transition-opacity","duration-200","hover:opacity-75"),e.elements.apiStatusFooter.title="Click to reconfigure API Credentials"),e.elements.applyCpConfigBtn&&e.elements.applyCpConfigBtn.addEventListener("click",e.app.handleApplyCpConfiguration),e.elements.mainTabs?e.tabs.initializeTabs():console.warn("Main tabs container not found for event listener init."),e.elements.confirmationModal&&e.elements.confirmCancelBtn&&e.elements.confirmCancelBtn.addEventListener("click",(()=>{e.ui.hideModal(e.elements.confirmationModal),e.state.confirmCallback=null})),e.elements.confirmationModal&&e.elements.confirmProceedBtn&&e.elements.confirmProceedBtn.addEventListener("click",(()=>{e.state.confirmCallback&&e.state.confirmCallback(),e.ui.hideModal(e.elements.confirmationModal),e.state.confirmCallback=null})),document.querySelectorAll('.modal [id^="cancel-"]').forEach((t=>{t&&"true"!==t.dataset.specificHandlerAttached&&(t.addEventListener("click",(()=>{const n=t.closest(".modal");n&&(e.ui.hideModal(n),"editZoneModal"===n.id&&e.state.zones.originalFullDataForEdit&&(e.state.zones.originalFullDataForEdit=null))})),t.dataset.specificHandlerAttached="true")}));const t=document.getElementById("notifications-toggle-btn");if(t){let n,o=!1;const a=750,i=()=>{e.state.notifications.sessionPollIntervalId?(e.notifications.stopSessionPolling(),e.notifications.updateNotificationToggleState(!1),e.ui.showToast("Sign-in notifications disabled.","info")):e.notifications.requestNotificationPermission()},s=i=>{i.preventDefault(),o=!1,n=setTimeout((()=>{o=!0,"Disable sign-in notifications"===t.getAttribute("aria-label")?e.app.handleSendTestNotification():e.ui.showToast("Enable notifications first to send a test.","warning")}),a)},r=e=>{e.preventDefault(),clearTimeout(n),o||i(),o=!1},l=()=>{clearTimeout(n),o=!1};t.addEventListener("mousedown",s),t.addEventListener("mouseup",r),t.addEventListener("mouseleave",l),t.addEventListener("touchstart",s,{passive:!1}),t.addEventListener("touchend",r),t.addEventListener("touchcancel",l)}},e.app.initializeAppLogic=async function(){if(await e.app.checkApiStatusAndConfig()){document.querySelectorAll("button, input, select").forEach((t=>{(t.id.startsWith("config-api-")||t===e.elements.saveApiCredsBtn)&&t!==e.elements.clearApiCredsBtn&&t!==e.elements.themeToggleBtn||(t.disabled=!1)})),e.elements.mainTabs&&e.elements.mainTabs.querySelectorAll(".tab-btn").forEach((e=>e.classList.remove("pointer-events-none"))),e.elements.clearApiCredsBtn&&(e.elements.clearApiCredsBtn.disabled=!1),e.elements.themeToggleBtn&&(e.elements.themeToggleBtn.disabled=!1),a.tT.watch(),e.sessions&&"function"==typeof e.sessions.fetchManagerSessionStatus&&await e.sessions.fetchManagerSessionStatus(),e.ui.disableVoucherActionButtons(!1,!0,!0);let t=localStorage.getItem(e.config.localStorageKeys.activeTab)||"dashboard";const n=window.location.hash.substring(1);n&&e.elements.tabPanes[n]&&(t=n,window.history.replaceState&&window.history.replaceState(null,null,window.location.pathname+window.location.search)),e.elements.tabPanes[t]||(t="dashboard"),e.tabs.setActiveTab(t,!1),e.ui&&e.ui.initializeResizeHandler&&e.ui.initializeResizeHandler(),e.notifications.initializeNotifications()}},e.app.handleSendTestNotification=async function(){if(!("Notification"in window))return void e.ui.showToast("Browser does not support notifications.","error");if(!navigator.serviceWorker.controller)return void e.ui.showToast("Service worker not active.","warning");let t=Notification.permission;"default"===t&&(await e.notifications.requestNotificationPermission(),t=Notification.permission),"granted"===t?(navigator.serviceWorker.controller.postMessage({type:"SHOW_NOTIFICATION",payload:{title:"Test Notification",body:"Notifications are working!",icon:"icons/icon-192x192.png",id:`test-${Date.now()}`}}),e.ui.showToast("Test notification sent!","success")):"denied"===t&&e.ui.showToast("Notification permission denied. Please enable in browser settings.","error",7e3)},e.app.initializeApp=async function(){e.app.loadTheme();try{await e.app.loadAppConfiguration(),e.app.loadApiCredentials(),e.app.initializeAllEventListeners(),e.app.registerServiceWorker(),await e.app.initializeAppLogic()}catch(t){console.error("Failed to initialize the application:",t),e.elements.applyCpConfigBtn&&(e.elements.applyCpConfigBtn.disabled=!0);const n=e.elements.tabPanes.dashboard;n&&(Object.values(e.elements.tabPanes).forEach((e=>{e&&(e.classList.add("hidden"),e.classList.remove("active"))})),n.classList.remove("hidden"),n.classList.add("active"),n.innerHTML=`<div class="text-center p-8 text-red-500 dark:text-red-400"><i class="fas fa-exclamation-triangle fa-3x mb-3"></i><p>Critical Error: App init failed. ${t.message}</p></div>`),e.app.setCredentialEntryUIMode(!0)}},document.addEventListener("DOMContentLoaded",e.app.initializeApp)}(window.CPManager)},1549:()=>{!function(e){e.utils={getZoneColor:function(t){return e.state.zoneColors[t]||(e.state.zoneColors[t]=e.config.predefinedColors[e.state.zoneColorIndex%e.config.predefinedColors.length],e.state.zoneColorIndex=(e.state.zoneColorIndex+1)%e.config.predefinedColors.length),e.state.zoneColors[t]},getAuthViaColor:function(t){return e.state.authViaColors[t]||(e.state.authViaColors[t]=e.config.predefinedColors[e.state.authViaColorIndex%e.config.predefinedColors.length],e.state.authViaColorIndex=(e.state.authViaColorIndex+1)%e.config.predefinedColors.length,e.state.authViaColorIndex===e.state.zoneColorIndex&&(e.state.authViaColorIndex=(e.state.authViaColorIndex+1)%e.config.predefinedColors.length)),e.state.authViaColors[t]},formatBytes:function(e,t=2){if(0===e||!e||isNaN(e))return"0 Bytes";const n=t<0?0:t,o=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,o)).toFixed(n))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][o]},formatAuthVia:function(t){return e.config.authViaMapping[t]||t||e.config.placeholderValue},formatVoucherTimestamp:function(t){if(!t||0===t)return e.config.placeholderValue;try{return new Date(1e3*t).toLocaleString()}catch(e){return console.error("Error formatting timestamp:",t,e),"Invalid Date"}},formatDuration:function(t,n="minutes"){let o;if("minutes"===n){if(0===parseInt(t))return"No Timeout";o=60*parseInt(t)}else{if(0===parseInt(t)&&"seconds"===n)return"0s";o=parseInt(t)}if(isNaN(o)||null===o||o<0)return e.config.placeholderValue;const a=Math.floor(o/86400);o%=86400;const i=Math.floor(o/3600);o%=3600;const s=Math.floor(o/60),r=o%60;let l=[];return a>0&&l.push(`${a}d`),i>0&&l.push(`${i}h`),s>0&&l.push(`${s}m`),r>0&&"seconds"===n&&l.length<3&&l.push(`${r}s`),0===l.length?"seconds"===n&&t>0?`${t}s`:"minutes"===n&&t>0?`${t}m`:"minutes"===n&&0===parseInt(t)?"No Timeout":"0s":l.join(" ")},formatOpnsenseSelectable:function(e){if("object"!=typeof e||null===e)return String(e||"");const t=[];for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const o=e[n];"object"==typeof o&&null!==o&&1===o.selected&&t.push(o.value||n)}return t.length>0?t.join(", "):e.value&&1===Object.keys(e).length?String(e.value):""},getZoneDescription:function(t){const n=e.state.zones.allConfigured.find((e=>String(e.zoneid)===String(t)));return n?n.description:`Zone ${t}`},getMacAddressType:function(e){if(!e||"string"!=typeof e)return null;const t=e.match(/^([0-9A-Fa-f]{2})[:|-]([0-9A-Fa-f]{2})[:|-]([0-9A-Fa-f]{2})[:|-]([0-9A-Fa-f]{2})[:|-]([0-9A-Fa-f]{2})[:|-]([0-9A-Fa-f]{2})$/);if(!t){if(/^[0-9A-Fa-f]{12}$/.test(e)){const t=e.substring(0,2),n=parseInt(t,16);return isNaN(n)?null:2&n?"private":"device"}return null}const n=t[1],o=parseInt(n,16);return isNaN(o)?null:2&o?"private":"device"}}}(window.CPManager)},4528:()=>{!function(e){e.notifications={requestNotificationPermission:async function(){"Notification"in window?"granted"===await Notification.requestPermission()?(e.ui.showToast("Sign-in notifications enabled!","success"),e.state.currentApiKey&&e.state.currentApiSecret?(e.state.notifications.isFirstPoll=!0,e.state.notifications.previousSessionIds.clear(),e.state.notifications.consecutivePollErrors=0,e.notifications.startSessionPolling(),e.notifications.updateNotificationToggleState(!0,!1)):(e.ui.showToast("API credentials not set. Cannot start polling.","warning"),e.notifications.updateNotificationToggleState(!1,!1))):(e.ui.showToast("Sign-in notifications permission denied.","warning"),e.notifications.stopSessionPolling(),e.notifications.updateNotificationToggleState(!1,!1)):e.ui.showToast("Browser does not support desktop notification","error")},checkForNewSessionsAndNotify:async function(){if("granted"!==Notification.permission)return e.notifications.stopSessionPolling(),void e.notifications.updateNotificationToggleState(!1,!1);try{const t=await e.api.callApi("/session/search");if(t&&Array.isArray(t.rows)){e.state.notifications.consecutivePollErrors=0,"true"===document.getElementById("notifications-toggle-btn")?.dataset.errorState&&e.notifications.updateNotificationToggleState(!0,!1);const n=new Set(t.rows.map((e=>e.sessionId)));if(e.state.notifications.isFirstPoll)return e.state.notifications.previousSessionIds=n,void(e.state.notifications.isFirstPoll=!1);const o=t.rows.filter((t=>!e.state.notifications.previousSessionIds.has(t.sessionId)));o.length>0&&o.forEach((t=>{const n=e.utils.getZoneDescription(t.zoneid)||`Zone ${t.zoneid}`,o=`User ${t.userName||t.ipAddress} connected to ${n}.`;navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({type:"SHOW_NOTIFICATION",payload:{title:"New Captive Portal Sign-in",body:o,icon:"icons/icon-192x192.png",id:t.sessionId}})})),e.state.notifications.previousSessionIds=new Set(n)}}catch(t){console.error("Error polling for new sessions:",t.message),e.state.notifications.consecutivePollErrors++,e.state.notifications.consecutivePollErrors>=e.state.notifications.MAX_POLL_ERRORS_BEFORE_DISABLE&&(e.ui.showToast(`Disabling notifications due to ${e.state.notifications.MAX_POLL_ERRORS_BEFORE_DISABLE} API errors.`,"error",8e3),e.notifications.stopSessionPolling(),e.notifications.updateNotificationToggleState(!1,!0))}},startSessionPolling:function(){if(e.state.notifications.sessionPollIntervalId)return;if("granted"!==Notification.permission)return;const t=document.hidden?e.state.notifications.POLLING_INTERVAL_HIDDEN_TAB:e.state.notifications.POLLING_INTERVAL;e.notifications.checkForNewSessionsAndNotify().finally((()=>{"granted"!==Notification.permission||e.state.notifications.sessionPollIntervalId||(e.state.notifications.sessionPollIntervalId=setInterval(e.notifications.checkForNewSessionsAndNotify,t))}))},stopSessionPolling:function(){e.state.notifications.sessionPollIntervalId&&(clearInterval(e.state.notifications.sessionPollIntervalId),e.state.notifications.sessionPollIntervalId=null)},updateNotificationToggleState:function(t,n=!1){const o=document.getElementById("notifications-toggle-btn");if(o){n?(o.innerHTML='<i class="fas fa-exclamation-triangle text-danger"></i>',o.setAttribute("aria-label","Notifications disabled (errors). Click to re-try."),o.dataset.errorState="true"):t?(o.innerHTML='<i class="fas fa-bell"></i>',o.setAttribute("aria-label","Disable sign-in notifications"),o.dataset.errorState="false"):(o.innerHTML='<i class="fas fa-bell-slash"></i>',o.setAttribute("aria-label","Enable sign-in notifications"),o.dataset.errorState="false");try{localStorage.setItem(e.config.localStorageKeys.signInNotificationsEnabled,t&&!n?"true":"false")}catch(e){console.warn("Could not save notification preference to localStorage:",e.message)}}},handleVisibilityChange:function(){(e.state.notifications.sessionPollIntervalId||"true"===localStorage.getItem(e.config.localStorageKeys.signInNotificationsEnabled))&&(e.state.notifications.sessionPollIntervalId&&(clearInterval(e.state.notifications.sessionPollIntervalId),e.state.notifications.sessionPollIntervalId=null),document.hidden?"granted"===Notification.permission&&(e.state.notifications.sessionPollIntervalId=setInterval(e.notifications.checkForNewSessionsAndNotify,e.state.notifications.POLLING_INTERVAL_HIDDEN_TAB)):"true"===localStorage.getItem(e.config.localStorageKeys.signInNotificationsEnabled)&&"granted"===Notification.permission&&e.notifications.startSessionPolling())},initializeNotifications:function(){const t=localStorage.getItem(e.config.localStorageKeys.signInNotificationsEnabled),n="granted"===Notification.permission;"true"===t&&n?(e.state.notifications.isFirstPoll=!0,e.state.notifications.previousSessionIds.clear(),e.state.notifications.consecutivePollErrors=0,e.notifications.startSessionPolling(),e.notifications.updateNotificationToggleState(!0,!1)):"true"===t&&"default"===Notification.permission?e.notifications.requestNotificationPermission():e.notifications.updateNotificationToggleState(!1,!1),document.addEventListener("visibilitychange",e.notifications.handleVisibilityChange)}}}(window.CPManager)},6232:()=>{!function(e){e.api={callApi:async function(t,n="GET",o=null){if(!e.config.baseUrl){const n="OPNsense API Base URL is not configured. Cannot make API call.";throw console.error(n,"Endpoint:",t),e.ui.showToast("API Base URL not set. Please configure in settings.","error",8e3),new Error(n)}const a=`${e.config.baseUrl}/api/captiveportal${t}`,i=new Headers;if(!e.state.currentApiKey||!e.state.currentApiSecret){const n="API Key or Secret is missing. Cannot make API call.";throw console.error(n,"Endpoint:",t),e.ui.showToast("API Key or Secret not set. Please configure in settings.","error"),new Error("API Key or Secret not set.")}i.append("Authorization","Basic "+btoa(e.state.currentApiKey+":"+e.state.currentApiSecret)),"POST"===n&&o&&i.append("Content-Type","application/json");const s={method:n,headers:i};o&&(s.body=JSON.stringify(o));try{const t=await fetch(a,s),o=await t.text();if(!t.ok){let i={message:`HTTP error! Status: ${t.status}.`};if(o)try{const e=JSON.parse(o);i.detail=e.message||e.detail||JSON.stringify(e)}catch(e){i.detail=o.substring(0,200)+(o.length>200?"...":""),console.error(`Failed to parse error response as JSON for ${n} ${a}:`,e,"Raw response:",o)}else i.detail=t.statusText||"No response body from server.";throw console.error("API Error:",n,a,t.status,i.detail,{response:t,responseText:o}),e.ui.showToast(`API Error: ${i.message} ${i.detail}`,"error"),new Error(`HTTP error! status: ${t.status}, message: ${i.detail}`)}if(204===t.status||!o)return console.info(`API Success: ${n} ${a} - No content or empty response.`),{status:"ok",message:`Operation successful (${204===t.status?"No Content":"Empty Response"})`};try{const t=JSON.parse(o);return t&&"error"===t.status?(console.warn(`API Operational Error for ${n} ${a}:`,t.message||"Error status received in JSON.",{jsonData:t}),e.ui.showToast(`API Operation Failed: ${t.message||"Error status received."}`,"warning")):console.info(`API Success: ${n} ${a}`,{jsonData:t}),t}catch(e){return t.ok&&(o.toLowerCase().includes("ok")||o.toLowerCase().includes("saved")||o.toLowerCase().includes("deleted")||o.toLowerCase().includes("success"))?(console.info(`API Success: ${n} ${a} - Text confirmation:`,o),{status:"ok_text",message:o}):(console.warn(`API Warning for ${n} ${a}: Successful response was not valid JSON and not recognized text. JSON parse error:`,e,"Content snippet:",o.substring(0,100)),{status:"ok_non_json",message:o})}}catch(t){if(console.error(`Fetch/Process Error for ${n} ${a}:`,t.message,t),!String(t.message).startsWith("HTTP error!")){let t="API request failed. This could be a network issue, or the OPNsense server might be unavailable or misconfigured.";e.config.baseUrl&&e.config.baseUrl.startsWith("http")&&!e.config.baseUrl.includes(window.location.origin)&&(t+=" If the app is hosted on a different domain than OPNsense, please check server's CORS configuration."),t+=" More details may be available in the browser's developer console.",e.ui.showToast(t,"error",8e3)}throw t}},checkConnection:async function(){try{const e=await this.callApi("/settings/search_zones");return Array.isArray(e?.rows)}catch(e){return console.error("API connection check failed:",e.message),!1}}}}(window.CPManager)},8212:()=>{var e;(e=CPManager).elements={themeToggleBtn:document.getElementById("theme-toggle-btn"),configInputSection:document.getElementById("config-input-section"),configApiBaseUrlInput:document.getElementById("config-api-base-url"),configApiKeyInput:document.getElementById("config-api-key"),configApiSecretInput:document.getElementById("config-api-secret"),saveApiCredsBtn:document.getElementById("save-api-creds-btn"),clearApiCredsBtn:document.getElementById("clear-api-creds-btn"),mainTabs:document.getElementById("mainTabs"),tabPanes:{dashboard:document.getElementById("dashboard-content"),sessions:document.getElementById("sessions-content"),vouchers:document.getElementById("vouchers-content"),info:document.getElementById("info-content")},sessionCardContainer:document.getElementById("session-card-container"),sessionPaginationContainer:document.getElementById("session-pagination"),sessionSearchInput:document.getElementById("session-search-input"),sessionZoneFilterSelect:document.getElementById("session-zone-filter-select"),findMySessionBtn:document.getElementById("find-my-session-btn"),disconnectSelectedSessionsBtn:document.getElementById("disconnect-selected-sessions-btn"),sessionSelectAllContainer:document.getElementById("session-select-all-container"),sessionSelectAllCheckbox:document.getElementById("session-select-all-checkbox"),sessionSelectedCountText:document.getElementById("session-selected-count-text"),voucherProviderSelect:document.getElementById("voucher-provider-select"),voucherGroupSelect:document.getElementById("voucher-group-select"),voucherCardContainer:document.getElementById("voucher-card-container"),voucherPaginationContainer:document.getElementById("voucher-pagination"),createVouchersBtn:document.getElementById("create-vouchers-btn"),dropVoucherGroupBtn:document.getElementById("drop-voucher-group-btn"),dropExpiredVouchersBtn:document.getElementById("drop-expired-vouchers-btn"),providerZoneLinkageCard:document.getElementById("provider-zone-linkage-card"),providerZoneLinkageDetails:document.getElementById("provider-zone-linkage-details"),voucherSearchInput:document.getElementById("voucher-search-input"),voucherStateFilterSelect:document.getElementById("voucher-state-filter-select"),voidSelectedVouchersBtn:document.getElementById("void-selected-vouchers-btn"),voucherSelectAllContainer:document.getElementById("voucher-select-all-container"),voucherSelectAllCheckbox:document.getElementById("voucher-select-all-checkbox"),voucherSelectedCountText:document.getElementById("voucher-selected-count-text"),generateVoucherModal:document.getElementById("generateVoucherModal"),voucherCountSelect:document.getElementById("voucher-count-select"),voucherCountCustom:document.getElementById("voucher-count-custom"),voucherLifetimeSelect:document.getElementById("voucher-lifetime-select"),voucherLifetimeCustom:document.getElementById("voucher-lifetime-custom"),voucherUsageSelect:document.getElementById("voucher-usage-select"),voucherUsageCustom:document.getElementById("voucher-usage-custom"),voucherGroupNameInput:document.getElementById("voucher-groupname"),cancelGenerateVoucherBtn:document.getElementById("cancel-generate-voucher-btn"),submitGenerateVoucherBtn:document.getElementById("submit-generate-voucher-btn"),zoneListContainer:document.getElementById("zone-list-container"),zonePaginationContainer:document.getElementById("zone-pagination"),editZoneModal:document.getElementById("editZoneModal"),editZoneModalTitleName:document.getElementById("editZoneModalTitleName"),editZoneUuidInput:document.getElementById("editZoneUuidInput"),zoneEditDescriptionInput:document.getElementById("zone-edit-description"),zoneEditEnabledCheckbox:document.getElementById("zone-edit-enabled"),zoneEditEnabledText:document.getElementById("zone-edit-enabled-text"),zoneEditAllowedAddressesTextarea:document.getElementById("zone-edit-allowedAddresses"),zoneEditAllowedMACAddressesTextarea:document.getElementById("zone-edit-allowedMACAddresses"),zoneEditHardTimeoutInput:document.getElementById("zone-edit-hardtimeout"),zoneEditIdleTimeoutInput:document.getElementById("zone-edit-idletimeout"),zoneEditConcurrentLoginsCheckbox:document.getElementById("zone-edit-concurrentlogins"),zoneEditConcurrentLoginsText:document.getElementById("zone-edit-concurrentlogins-text"),zoneEditTemplateSelect:document.getElementById("zone-edit-template"),zoneEditAuthServersSelect:document.getElementById("zone-edit-authservers"),cancelEditZoneBtn:document.getElementById("cancel-edit-zone-btn"),submitEditZoneBtn:document.getElementById("submit-edit-zone-btn"),applyCpConfigBtn:document.getElementById("apply-cp-config-btn"),confirmationModal:document.getElementById("confirmationModal"),confirmationTitle:document.getElementById("confirmationTitle"),confirmationMessage:document.getElementById("confirmationMessage"),confirmCancelBtn:document.getElementById("confirm-cancel-btn"),confirmProceedBtn:document.getElementById("confirm-proceed-btn"),toastNotification:document.getElementById("toast-notification"),toastMessage:document.getElementById("toast-message"),apiStatusFooter:document.getElementById("api-status-footer"),apiStatusFooterText:document.getElementById("api-status-footer")?.querySelector("span"),dashboardStatsContainer:document.getElementById("dashboard-stats-container"),dataUsageCanvas:document.getElementById("dataUsageCanvas"),donutTotalData:document.getElementById("donut-total-data"),uploadLegendValue:document.getElementById("upload-legend-value"),downloadLegendValue:document.getElementById("download-legend-value"),uploadPercentageSpan:document.getElementById("upload-percentage"),downloadPercentageSpan:document.getElementById("download-percentage"),legendItems:document.querySelectorAll(".legend-item")},e.ui||(e.ui={}),e.ui.paginationStates={},e.ui.resizeListenerAttached=!1,e.ui={...e.ui,showToast:function(t,n="info",o=5e3){const a=e.elements.toastNotification,i=e.elements.toastMessage;if(!a||!i)return console.warn("Toast elements not found in the DOM."),void alert(`Toast (${n}): ${t}`);switch(i.textContent=t,a.className="fixed bottom-5 right-5 text-white py-3 px-5 rounded-lg shadow-lg opacity-0 transition-opacity duration-300 max-w-xs z-50 print:hidden pointer-events-none",n){case"success":a.classList.add("bg-success");break;case"error":a.classList.add("bg-danger");break;case"warning":a.classList.add("bg-warning","text-foreground");break;default:a.classList.add("bg-secondary")}a.classList.remove("opacity-0"),a.classList.add("opacity-100"),a.classList.remove("pointer-events-none"),a.timer&&clearTimeout(a.timer),a.timer=setTimeout((()=>{a.classList.remove("opacity-100"),a.classList.add("opacity-0"),a.classList.add("pointer-events-none")}),o)},showConfirmationModal:function(t,n,o){const{confirmationModal:a,confirmationTitle:i,confirmationMessage:s}=e.elements;if(!a||!i||!s)return console.error("Confirmation modal elements not found."),void(confirm(t+"\n"+n.replace(/<br\/>/g,"\n").replace(/<strong>|<\/strong>/g,""))&&o&&o());i.textContent=t,s.innerHTML=n,e.state.confirmCallback=o,a.classList.remove("hidden"),a.classList.add("flex")},hideModal:function(e){e&&(e.classList.add("hidden"),e.classList.remove("flex"))},toggleCardDetails:function(e){if(!e)return;const t=e.querySelector(".card-details-content");if(!t)return;const n=t.classList.contains("expanded"),o=e.closest(".tab-pane");o&&o.querySelectorAll(".session-card, .voucher-card, .zone-info-card, #provider-zone-linkage-card").forEach((t=>{if(t!==e){const e=t.querySelector(".card-details-content");if(e&&e.classList.contains("expanded")){e.classList.remove("expanded"),e.setAttribute("aria-hidden","true");const n=t.querySelector(".voucher-summary, .session-summary, .zone-summary");if(n){n.setAttribute("aria-expanded","false");const e=n.querySelector("svg.svg-inline--fa.fa-chevron-down");e&&e.classList.remove("rotate-180")}}}}));const a=!n;t.classList.toggle("expanded",a),t.setAttribute("aria-hidden",String(!a));const i=e.querySelector(".voucher-summary, .session-summary, .zone-summary");if(i){i.setAttribute("aria-expanded",String(a));const e=i.querySelector("svg.svg-inline--fa.fa-chevron-down");e&&e.classList.toggle("rotate-180",a)}},disableVoucherActionButtons:function(t,n,o){const{createVouchersBtn:a,dropExpiredVouchersBtn:i,dropVoucherGroupBtn:s}=e.elements;a&&(a.disabled=t),i&&(i.disabled=n),s&&(s.disabled=o)},showSkeletonLoaders:function(e,t=2,n='<div class="skeleton-card"></div>',o=null){if(e){let o="";for(let e=0;e<t;e++)o+=n;e.innerHTML=o}if(o){const e=document.getElementById(o);e&&(e.innerHTML="")}},clearContainer:function(e,t=null){if(e&&(e.innerHTML=""),t){const e=document.getElementById(t);e&&(e.innerHTML="")}},showNoDataMessage:function(e,t="No data available.",n="fas fa-info-circle",o=null){if(e&&(e.innerHTML=`<div class="text-center p-4 text-gray-500 dark:text-slate-400"><i class="${n} fa-3x mb-2"></i><p>${t}</p></div>`),o){const e=document.getElementById(o);e&&(e.innerHTML="")}},renderPaginationControls:function(t,n,o,a,i){if(t&&t.id&&(e.ui.paginationStates[t.id]={container:t,currentPage:n,totalItems:o,itemsPerPage:a,onPageChangeCallback:i}),!t)return;if(t.innerHTML="",o<=a)return;const s=Math.ceil(o/a),r=document.createElement("nav");r.className="flex items-center justify-between px-4 py-3 sm:px-6 mt-6",r.setAttribute("aria-label","Pagination");const l=document.createElement("div");l.className="hidden sm:block";const c=(n-1)*a+1,d=Math.min(n*a,o);l.innerHTML=`<p class="text-sm text-gray-700 dark:text-slate-300">Showing <span class="font-medium text-gray-900 dark:text-white">${c}</span> to <span class="font-medium text-gray-900 dark:text-white">${d}</span> of <span class="font-medium text-gray-900 dark:text-white">${o}</span> results</p>`,r.appendChild(l);const u=document.createElement("div");u.className="flex-1 flex justify-between sm:justify-end";const m=document.createElement("div");m.className="relative z-0 inline-flex rounded-md shadow-sm -space-x-px",m.setAttribute("aria-label","Pagination");const p=(e,t,o=!1,a=!0,s=!1)=>{const r=document.createElement("button");r.innerHTML=e,r.setAttribute("aria-label",o?t<n?"Previous page":"Next page":`Go to page ${t}`);let l=o?" p-2":" px-4 py-2",c="";return s?(c="pagination-btn-current",r.setAttribute("aria-current","page")):c=a?"pagination-btn-hover":"pagination-btn-disabled",r.className=`relative inline-flex items-center text-sm font-medium pagination-btn-base ${l} ${c}`,a&&!s&&r.addEventListener("click",(()=>i(t))),r.disabled=!a,r},g=p('<i class="fas fa-chevron-left"></i>',n-1,!0,n>1);g.classList.add("rounded-l-md"),m.appendChild(g);let f=2;"undefined"!=typeof window&&window.innerWidth<480?f=0:"undefined"!=typeof window&&window.innerWidth<640&&(f=1);let h=[];if(s<=2*f+5)for(let e=1;e<=s;e++)h.push(e);else{h.push(1),n>f+2&&h.push("...");let e=Math.max(2,n-f),t=Math.min(s-1,n+f);n<=f+1&&(t=Math.min(s-1,1+2*f)),n>=s-f&&(e=Math.max(2,s-2*f));for(let n=e;n<=t;n++)n>0&&n<=s&&h.push(n);n<s-f-1&&h.push("..."),s>1&&h.push(s)}h=[...new Set(h)];for(let e=h.length-2;e>=1;e--)"..."===h[e]&&h[e-1]+1===h[e+1]&&h.splice(e,1);h.forEach((e=>{if("..."===e){const e=document.createElement("span");e.innerHTML="&hellip;",e.className="relative inline-flex items-center text-sm font-medium pagination-btn-base px-4 py-2",m.appendChild(e)}else m.appendChild(p(String(e),e,!1,!0,e===n))}));const b=p('<i class="fas fa-chevron-right"></i>',n+1,!0,n<s);b.classList.add("rounded-r-md"),m.appendChild(b),u.appendChild(m),r.appendChild(u),t.appendChild(r),n>1&&"function"==typeof t.scrollIntoView&&setTimeout((()=>{document.body.contains(t)&&null!==t.offsetParent&&t.scrollIntoView({behavior:"auto",block:"nearest"})}),100)},initializeResizeHandler:function(){if("undefined"!=typeof window&&!e.ui.resizeListenerAttached){let t;const n=()=>{let t=null;if(e.elements&&e.elements.tabPanes)for(const n in e.elements.tabPanes){const o=e.elements.tabPanes[n];if(o&&o.classList.contains("active")&&!o.classList.contains("hidden")){t=o.id;break}}if(t){let n;if(t.includes("sessions")?n="session-pagination":t.includes("vouchers")?n="voucher-pagination":t.includes("info")&&(n="zone-pagination"),n&&e.ui.paginationStates[n]){const t=e.ui.paginationStates[n];e.ui.renderPaginationControls(t.container,t.currentPage,t.totalItems,t.itemsPerPage,t.onPageChangeCallback)}}};window.addEventListener("resize",(()=>{clearTimeout(t),t=setTimeout(n,250)})),e.ui.resizeListenerAttached=!0}}}}},s={};function r(e){var t=s[e];if(void 0!==t)return t.exports;var n=s[e]={exports:{}};return i[e].call(n.exports,n,n.exports,r),n.exports}r.m=i,e=[],r.O=(t,n,o,a)=>{if(!n){var i=1/0;for(d=0;d<e.length;d++){for(var[n,o,a]=e[d],s=!0,l=0;l<n.length;l++)(!1&a||i>=a)&&Object.keys(r.O).every((e=>r.O[e](n[l])))?n.splice(l--,1):(s=!1,a<i&&(i=a));if(s){e.splice(d--,1);var c=o();void 0!==c&&(t=c)}}return t}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[n,o,a]},n=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,r.t=function(e,o){if(1&o&&(e=this(e)),8&o)return e;if("object"==typeof e&&e){if(4&o&&e.__esModule)return e;if(16&o&&"function"==typeof e.then)return e}var a=Object.create(null);r.r(a);var i={};t=t||[null,n({}),n([]),n(n)];for(var s=2&o&&e;"object"==typeof s&&!~t.indexOf(s);s=n(s))Object.getOwnPropertyNames(s).forEach((t=>i[t]=()=>e[t]));return i.default=()=>e,r.d(a,i),a},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.f={},r.e=e=>Promise.all(Object.keys(r.f).reduce(((t,n)=>(r.f[n](e,t),t)),[])),r.u=e=>"js/chunks/"+e+"."+{159:"f8e40fab8395a1a20c88",264:"be4b6cff7bdabeebeef7",354:"07739e33ca4d57a1527c",384:"f872f9e84feafbd96df8",415:"5a7047caf5a25944d493",418:"888ff266ade1890514e5",447:"41ed2ddbb7182395a626",469:"5e5c950da53ca00f61dc",552:"4e75f34791bfca091e23",661:"adcbd007cb0a19b0e935",844:"e5eae7dc96536619f891"}[e]+".js",r.miniCssF=e=>{},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o={},a="cpmanager:",r.l=(e,t,n,i)=>{if(o[e])o[e].push(t);else{var s,l;if(void 0!==n)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==e||u.getAttribute("data-webpack")==a+n){s=u;break}}s||(l=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,r.nc&&s.setAttribute("nonce",r.nc),s.setAttribute("data-webpack",a+n),s.src=e),o[e]=[t];var m=(t,n)=>{s.onerror=s.onload=null,clearTimeout(p);var a=o[e];if(delete o[e],s.parentNode&&s.parentNode.removeChild(s),a&&a.forEach((e=>e(n))),t)return t(n)},p=setTimeout(m.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=m.bind(null,s.onerror),s.onload=m.bind(null,s.onload),l&&document.head.appendChild(s)}},r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;r.g.importScripts&&(e=r.g.location+"");var t=r.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");if(n.length)for(var o=n.length-1;o>-1&&(!e||!/^http(s?):/.test(e));)e=n[o--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),r.p=e+"../"})(),(()=>{var e={792:0};r.f.j=(t,n)=>{var o=r.o(e,t)?e[t]:void 0;if(0!==o)if(o)n.push(o[2]);else{var a=new Promise(((n,a)=>o=e[t]=[n,a]));n.push(o[2]=a);var i=r.p+r.u(t),s=new Error;r.l(i,(n=>{if(r.o(e,t)&&(0!==(o=e[t])&&(e[t]=void 0),o)){var a=n&&("load"===n.type?"missing":n.type),i=n&&n.target&&n.target.src;s.message="Loading chunk "+t+" failed.\n("+a+": "+i+")",s.name="ChunkLoadError",s.type=a,s.request=i,o[1](s)}}),"chunk-"+t,t)}},r.O.j=t=>0===e[t];var t=(t,n)=>{var o,a,[i,s,l]=n,c=0;if(i.some((t=>0!==e[t]))){for(o in s)r.o(s,o)&&(r.m[o]=s[o]);if(l)var d=l(r)}for(t&&t(n);c<i.length;c++)a=i[c],r.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return r.O(d)},n=self.webpackChunkcpmanager=self.webpackChunkcpmanager||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var l=r.O(void 0,[974],(()=>r(1408)));l=r.O(l)})();
//# sourceMappingURL=main.c54fab3577dfdb377caa.js.map